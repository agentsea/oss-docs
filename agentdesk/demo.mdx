---
title: Drawing Toy: a simple example of using AgentDesk
---

This tutorial shows you the basic capabilities of AgentDesk: running a VM, opening a browser, using the mouse inside the VM and taking screenshots. We also show how to execute Desktop actions by passing JSON descriptions of operations to it.

Prerequisites:

* [qemu](https://www.qemu.org/)
* [Docker Desktop](https://www.docker.com/products/docker-desktop)
* `pip install agentdesk`

### Running a VM

Let's start from running a VM. When you execute this cell, the following should happen:

* The docker image with an `Agentd` daemon will be downloaded.
* The virtual machine will be started via `qemu`.
* A docker container with UI will be started via `Docker Desktop`.
* Your default browser will open the UI with a stream from the VM.

For the first time of running AgentDesk, this may take some time. Please be patient!

*Warning*: all operations with desktop are asynchronous and take some time, depending on your local machine performance. If you run this notebook without pauses, you'll likely not see the intended results. Please run the cell one by one and observe the changes in the VM browser.


```python
from agentdesk import Desktop
```


```python

# Create a local desktop
desktop = Desktop.local()
# Launch the desktop UI
desktop.view(background=True)
```

    
    connecting to local sqlite db ./data/agentdesk.db
    using ssh key in ~/.ssh/id_rsa.pub
    waiting for desktop to be ready...
    calling agentd...
    agentd response:  <Response [200]>
    
    successfully created desktop 'confident-torvalds'
    vm doesn't require proxy
    connected to desktop via agentd
    found running UI container


You can see that the VM is fully operational: you can use your mouse and keyboard yourself, just like any remote desktop but the primary purpose is to let the agent interact with the desktop.

### Screenshot utility function

Before moving on, let's define an utility function to visualize the screenshots.


```python
import base64
from io import BytesIO
from typing import Union

from PIL import Image

def visualize_b64_img(b64_str: str) -> Union[Image.Image, None]:
    try:
        img_data = base64.b64decode(b64_str)
        img_io = BytesIO(img_data)
        img = Image.open(img_io)

        return img
    except Exception as e:
        print(f"Error loading image: {e}")
        return None
```

### Direct manipulation with Desktop

For the purpose of this tutorial, we open a simple drawing toy app on https://mondrianandme.com/. This is a light-weight website where someone can click on the canvas to generate images in Mondrian style. 




```python
desktop.open_url("https://mondrianandme.com/")
```


```python
visualize_b64_img(desktop.take_screenshot())
```




    
![png](demo_files/demo_15_0.png)
    




```python
desktop.click(x=150, y=100)
```


```python
visualize_b64_img(desktop.take_screenshot())
```




    
![png](demo_files/demo_17_0.png)
    



### Using JSON schema to run Desktop actions


```python
actions = desktop.json_schema()
actions
```




    [{'name': 'click',
      'parameters': {'type': 'object',
       'properties': {'button': {'type': 'string',
         'description': 'Button to click. Defaults to "left".'},
        'x': {'anyOf': [{'type': 'integer'}, {'type': 'null'}],
         'description': 'X coordinate to move to, if not provided it will click on current location. Defaults to None.'},
        'y': {'anyOf': [{'type': 'integer'}, {'type': 'null'}],
         'description': 'Y coordinate to move to, if not provided it will click on current location. Defaults to None.'}},
       'required': []},
      'description': 'Click mouse button'},
     {'name': 'double_click',
      'parameters': {'type': 'object', 'properties': {}, 'required': []},
      'description': 'Double click the mouse'},
     {'name': 'drag_mouse',
      'parameters': {'type': 'object',
       'properties': {'x': {'type': 'integer', 'description': 'x coordinate'},
        'y': {'type': 'integer', 'description': 'y coordinate'}},
       'required': ['x', 'y']},
      'description': 'Drag the mouse'},
     {'name': 'move_mouse',
      'parameters': {'type': 'object',
       'properties': {'x': {'type': 'integer', 'description': 'x coordinate'},
        'y': {'type': 'integer', 'description': 'y coordinate'}},
       'required': ['x', 'y']},
      'description': 'Move mouse to a position'},
     {'name': 'open_url',
      'parameters': {'type': 'object',
       'properties': {'url': {'type': 'string', 'description': 'URL to open'}},
       'required': ['url']},
      'description': 'Open a URL in chromium'},
     {'name': 'press_key',
      'parameters': {'type': 'object',
       'properties': {'key': {'type': 'string',
         'description': 'Which key to press'}},
       'required': ['key']},
      'description': 'Press a key'},
     {'name': 'result',
      'parameters': {'type': 'object',
       'properties': {'value': {'type': 'string',
         'description': 'Value to return'}},
       'required': ['value']},
      'description': 'Return a result to the user'},
     {'name': 'scroll',
      'parameters': {'type': 'object',
       'properties': {'clicks': {'type': 'integer',
         'description': 'Number of clicks, negative scrolls down, positive scrolls up. Defaults to -3.'}},
       'required': []},
      'description': 'Scroll the screen'},
     {'name': 'type_text',
      'parameters': {'type': 'object',
       'properties': {'text': {'type': 'string', 'description': 'Text to type'}},
       'required': ['text']},
      'description': 'Type text'},
     {'name': 'mouse_coordinates',
      'parameters': {'type': 'object', 'properties': {}, 'required': []},
      'description': 'Get the current mouse coordinates'},
     {'name': 'take_screenshot',
      'parameters': {'type': 'object', 'properties': {}, 'required': []},
      'description': 'Take screenshot'}]




```python
def next_click_json(n):
    return {"tool": "click", "parameters": {"x": n * 150, "y": n * 100}}

```


```python
action = desktop.find_action("click")

for i in range(2, 10):
    json_click = next_click_json(i)
    desktop.use(action, **json_click["parameters"])

```


```python
visualize_b64_img(desktop.take_screenshot())
```




    
![png](demo_files/demo_22_0.png)
    



### What's next?

* To see a basic example on how to use Desktop as a Tool for LLM, see the code in `agentdesk/examples/gpt4v`.
* To see a more complex use-case, check out [SurfDino](https://github.com/agentsea/surfdino) – our GUI surfing agent.
* Visit the [API reference](https://agentsea.github.io/agentdesk/) for more information.


